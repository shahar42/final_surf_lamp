<!-- TEMPORARY ARROW STYLING CONTROL PANEL - DELETE AFTER STYLING IS FINALIZED -->
<div id="arrowControlPanel" style="position: fixed; right: 20px; top: 20px; width: 320px; background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(10px); border-radius: 15px; padding: 20px; color: white; z-index: 9999; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);">
    <h3 style="margin: 0 0 20px 0; font-size: 18px; text-align: center; border-bottom: 2px solid rgba(59, 130, 246, 0.5); padding-bottom: 10px;">ðŸŽ¨ Arrow Style Controls</h3>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Stroke Color</label>
        <input type="color" id="ctrl_strokeColor" value="#F1F5F9" style="width: 100%; height: 35px; border: none; border-radius: 8px; cursor: pointer;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Stroke Width <span id="val_strokeWidth" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">2</span></label>
        <input type="range" id="ctrl_strokeWidth" min="0.5" max="6" step="0.5" value="2" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Opacity <span id="val_opacity" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">1.0</span></label>
        <input type="range" id="ctrl_opacity" min="0.1" max="1" step="0.1" value="1" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Arrow Size <span id="val_arrowSize" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">63</span></label>
        <input type="range" id="ctrl_arrowSize" min="40" max="120" step="1" value="63" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Drop Shadow Blur <span id="val_shadowBlur" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">4</span></label>
        <input type="range" id="ctrl_shadowBlur" min="0" max="20" step="1" value="4" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Drop Shadow Offset Y <span id="val_shadowY" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">2</span></label>
        <input type="range" id="ctrl_shadowY" min="-10" max="10" step="1" value="2" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Drop Shadow Opacity <span id="val_shadowOpacity" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">0.5</span></label>
        <input type="range" id="ctrl_shadowOpacity" min="0" max="1" step="0.1" value="0.5" style="width: 100%;">
    </div>

    <hr style="border: none; border-top: 1px solid rgba(59, 130, 246, 0.3); margin: 20px 0;">
    <h4 style="margin: 0 0 15px 0; font-size: 14px; text-align: center; color: #60a5fa;">ðŸªµ Carved Wood Effect</h4>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Inner Shadow Blur <span id="val_innerBlur" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">0</span></label>
        <input type="range" id="ctrl_innerBlur" min="0" max="10" step="0.5" value="0" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Inner Shadow Offset <span id="val_innerOffset" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">0</span></label>
        <input type="range" id="ctrl_innerOffset" min="-5" max="5" step="0.5" value="0" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Inner Shadow Opacity <span id="val_innerOpacity" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">0</span></label>
        <input type="range" id="ctrl_innerOpacity" min="0" max="1" step="0.1" value="0" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Highlight Brightness <span id="val_highlight" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">0</span></label>
        <input type="range" id="ctrl_highlight" min="0" max="10" step="0.5" value="0" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Shaft Curve <span id="val_shaftCurve" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">11.5</span></label>
        <input type="range" id="ctrl_shaftCurve" min="3" max="21" step="0.5" value="11.5" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Head Spread <span id="val_headSpread" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">4.5</span></label>
        <input type="range" id="ctrl_headSpread" min="2" max="10" step="0.5" value="4.5" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Head Length <span id="val_headLength" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">10</span></label>
        <input type="range" id="ctrl_headLength" min="5" max="18" step="1" value="10" style="width: 100%;">
    </div>

    <div style="margin-bottom: 15px;">
        <label style="display: block; margin-bottom: 5px; font-size: 12px; font-weight: 600; text-transform: uppercase;">Head Width <span id="val_headWidth" style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 11px;">7</span></label>
        <input type="range" id="ctrl_headWidth" min="3" max="12" step="1" value="7" style="width: 100%;">
    </div>

    <button onclick="copyArrowConfig()" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; margin-top: 10px;">ðŸ“‹ Copy Config</button>

    <div id="configOutput" style="background: #0f172a; padding: 12px; border-radius: 8px; margin-top: 15px; font-family: monospace; font-size: 11px; word-wrap: break-word; max-height: 150px; overflow-y: auto;"></div>
</div>

<script>
(function() {
    // Get dashboard arrow elements
    const windArrow = document.getElementById('windArrow');
    const arrowSVG = windArrow ? windArrow.querySelector('svg') : null;
    const arrowPath = arrowSVG ? arrowSVG.querySelector('path') : null;

    if (!windArrow || !arrowSVG || !arrowPath) {
        console.error('Arrow elements not found on dashboard');
        return;
    }

    // Get all controls
    const controls = {
        strokeColor: document.getElementById('ctrl_strokeColor'),
        strokeWidth: document.getElementById('ctrl_strokeWidth'),
        opacity: document.getElementById('ctrl_opacity'),
        arrowSize: document.getElementById('ctrl_arrowSize'),
        shadowBlur: document.getElementById('ctrl_shadowBlur'),
        shadowY: document.getElementById('ctrl_shadowY'),
        shadowOpacity: document.getElementById('ctrl_shadowOpacity'),
        innerBlur: document.getElementById('ctrl_innerBlur'),
        innerOffset: document.getElementById('ctrl_innerOffset'),
        innerOpacity: document.getElementById('ctrl_innerOpacity'),
        highlight: document.getElementById('ctrl_highlight'),
        shaftCurve: document.getElementById('ctrl_shaftCurve'),
        headSpread: document.getElementById('ctrl_headSpread'),
        headLength: document.getElementById('ctrl_headLength'),
        headWidth: document.getElementById('ctrl_headWidth')
    };

    // Create SVG filter for carved effect
    const filterDefs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
    const filter = document.createElementNS('http://www.w3.org/2000/svg', 'filter');
    filter.setAttribute('id', 'carvedEffect');
    filter.setAttribute('x', '-50%');
    filter.setAttribute('y', '-50%');
    filter.setAttribute('width', '200%');
    filter.setAttribute('height', '200%');
    filterDefs.appendChild(filter);
    arrowSVG.insertBefore(filterDefs, arrowSVG.firstChild);

    function updateArrow() {
        const shaft = controls.shaftCurve.value;
        const spread = parseFloat(controls.headSpread.value);
        const length = parseFloat(controls.headLength.value);
        const width = parseFloat(controls.headWidth.value);

        // Update path
        const pathD = `M12 3 Q11.5 ${shaft} 12 21 M12 3 Q${12 - spread} ${spread} ${12 - width} ${length} M12 3 Q${12 + spread} ${spread} ${12 + width} ${length}`;
        arrowPath.setAttribute('d', pathD);

        // Update stroke
        arrowPath.setAttribute('stroke', controls.strokeColor.value);
        arrowPath.setAttribute('stroke-width', controls.strokeWidth.value);
        arrowPath.setAttribute('opacity', controls.opacity.value);

        // Update size
        windArrow.style.width = controls.arrowSize.value + 'px';
        windArrow.style.height = controls.arrowSize.value + 'px';

        // Build SVG filter for carved effect
        const filter = arrowSVG.querySelector('#carvedEffect');
        filter.innerHTML = ''; // Clear existing

        const innerBlur = parseFloat(controls.innerBlur.value);
        const innerOffset = parseFloat(controls.innerOffset.value);
        const innerOpacity = parseFloat(controls.innerOpacity.value);
        const highlight = parseFloat(controls.highlight.value);

        if (innerBlur > 0 && innerOpacity > 0) {
            // Inner shadow (carved inset effect)
            const blur = document.createElementNS('http://www.w3.org/2000/svg', 'feGaussianBlur');
            blur.setAttribute('in', 'SourceAlpha');
            blur.setAttribute('stdDeviation', innerBlur);
            blur.setAttribute('result', 'blur');
            filter.appendChild(blur);

            const offset = document.createElementNS('http://www.w3.org/2000/svg', 'feOffset');
            offset.setAttribute('in', 'blur');
            offset.setAttribute('dx', innerOffset);
            offset.setAttribute('dy', innerOffset);
            offset.setAttribute('result', 'offsetBlur');
            filter.appendChild(offset);

            const flood = document.createElementNS('http://www.w3.org/2000/svg', 'feFlood');
            flood.setAttribute('flood-color', '#000000');
            flood.setAttribute('flood-opacity', innerOpacity);
            flood.setAttribute('result', 'floodColor');
            filter.appendChild(flood);

            const composite = document.createElementNS('http://www.w3.org/2000/svg', 'feComposite');
            composite.setAttribute('in', 'floodColor');
            composite.setAttribute('in2', 'offsetBlur');
            composite.setAttribute('operator', 'in');
            composite.setAttribute('result', 'innerShadow');
            filter.appendChild(composite);

            const merge = document.createElementNS('http://www.w3.org/2000/svg', 'feMerge');
            const mergeNode1 = document.createElementNS('http://www.w3.org/2000/svg', 'feMergeNode');
            mergeNode1.setAttribute('in', 'innerShadow');
            const mergeNode2 = document.createElementNS('http://www.w3.org/2000/svg', 'feMergeNode');
            mergeNode2.setAttribute('in', 'SourceGraphic');
            merge.appendChild(mergeNode1);
            merge.appendChild(mergeNode2);
            filter.appendChild(merge);

            arrowPath.setAttribute('filter', 'url(#carvedEffect)');
        } else {
            arrowPath.removeAttribute('filter');
        }

        // Update drop shadow and highlight
        let filterStr = `drop-shadow(0px ${controls.shadowY.value}px ${controls.shadowBlur.value}px rgba(0,0,0,${controls.shadowOpacity.value}))`;

        if (highlight > 0) {
            filterStr += ` brightness(${1 + highlight / 10})`;
        }

        arrowSVG.style.filter = filterStr;

        // Update value displays
        document.getElementById('val_strokeWidth').textContent = controls.strokeWidth.value;
        document.getElementById('val_opacity').textContent = controls.opacity.value;
        document.getElementById('val_arrowSize').textContent = controls.arrowSize.value;
        document.getElementById('val_shadowBlur').textContent = controls.shadowBlur.value;
        document.getElementById('val_shadowY').textContent = controls.shadowY.value;
        document.getElementById('val_shadowOpacity').textContent = controls.shadowOpacity.value;
        document.getElementById('val_innerBlur').textContent = innerBlur;
        document.getElementById('val_innerOffset').textContent = innerOffset;
        document.getElementById('val_innerOpacity').textContent = innerOpacity;
        document.getElementById('val_highlight').textContent = highlight;
        document.getElementById('val_shaftCurve').textContent = shaft;
        document.getElementById('val_headSpread').textContent = spread;
        document.getElementById('val_headLength').textContent = length;
        document.getElementById('val_headWidth').textContent = width;

        // Update config output
        updateConfigOutput();
    }

    function updateConfigOutput() {
        const shaft = controls.shaftCurve.value;
        const spread = parseFloat(controls.headSpread.value);
        const length = parseFloat(controls.headLength.value);
        const width = parseFloat(controls.headWidth.value);
        const pathD = `M12 3 Q11.5 ${shaft} 12 21 M12 3 Q${12 - spread} ${spread} ${12 - width} ${length} M12 3 Q${12 + spread} ${spread} ${12 + width} ${length}`;

        const config = {
            pathD: pathD,
            stroke: controls.strokeColor.value,
            strokeWidth: controls.strokeWidth.value,
            opacity: controls.opacity.value,
            size: controls.arrowSize.value + 'px',
            dropShadow: {
                blur: controls.shadowBlur.value,
                offsetY: controls.shadowY.value,
                opacity: controls.shadowOpacity.value
            },
            carvedEffect: {
                innerBlur: controls.innerBlur.value,
                innerOffset: controls.innerOffset.value,
                innerOpacity: controls.innerOpacity.value,
                highlight: controls.highlight.value
            }
        };

        document.getElementById('configOutput').textContent = JSON.stringify(config, null, 2);
    }

    window.copyArrowConfig = function() {
        const config = document.getElementById('configOutput').textContent;
        navigator.clipboard.writeText(config).then(() => {
            alert('âœ… Config copied to clipboard!');
        });
    };

    // Add event listeners
    Object.values(controls).forEach(control => {
        control.addEventListener('input', updateArrow);
    });

    // Initialize
    updateArrow();
})();
</script>
